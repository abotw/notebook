
# 时序逻辑电路（Sequential Logic Circuit）

## todo

时序电路的逻辑函数表达式

1. Y = 输入函数/激励函数
    
2. Q = 触发器的次态方程/次态函数
    
3. 输出函数（Mealy（输入+状态），Moore（状态））

## 一、基本概念

时序逻辑电路（Sequential Logic Circuit）是**输出不仅取决于当前输入，还与电路的历史状态有关**的一类电路。它们具有**记忆功能**，可存储系统的历史信息，通常以**状态机（FSM, Finite State Machine）**形式建模。与之相对的是组合逻辑电路（Combinational Logic Circuit），后者的输出仅与当前输入有关。

### 1. 常见术语说明

| 术语     | 英文全称                | 说明                                  |
| ------ | ------------------- | ----------------------------------- |
| 状态     | State               | 电路在某一时刻的内部存储信息，通常由触发器（Flip-Flop）存储。 |
| 状态转移方程 | Next-State Equation | 当前状态和输入决定下一状态的逻辑表达式                 |
| 输出方程   | Output Equation     | 当前状态和/或输入决定输出的逻辑表达式                 |
| 时钟信号   | Clock Signal        | 用于同步电路状态变化的控制信号。                    |
| 边沿触发   | Edge-Triggered      | 电路响应时钟上升/下降沿而非电平                    |
| 激励方程   | Excitation Equation | 推导触发器输入逻辑的表达式（用于实现特定状态转移）           |
| 触发器    | Flip-Flop           | 基本的状态存储单元，常见类型有D触发器、T触发器、JK触发器。     |

### 2. 同步时序逻辑电路（Synchronous Sequential Logic Circuit）

- 状态变化由统一的时钟控制。所有存储单元由同一**时钟信号（Clock Signal）**触发。
    
- 稳定可靠，易于设计与验证。
    
- 应用：CPU 控制单元、寄存器文件、计数器等。
    

### 3. 异步时序电路（Asynchronous Sequential Circuit）

- 状态变化不依赖统一时钟，仅依赖输入信号变化。
    
- 响应速度快，但设计难度大，易发生**竞争-冒险（Race-Hazard）**问题。
    
- 应用：高速接口、手工控制逻辑等。

## 二、组成结构

典型的同步时序逻辑电路由以下五部分组成：

1. **组合逻辑部分（Combinational Logic）**：根据当前输入和当前状态决定输出和下一状态，决定状态转移和输出。
2. **存储器件（Storage Elements）**：如触发器（Flip-Flop）、锁存器（Latch），用于保存状态。
3. **时钟（Clock）**：控制状态更新的时序基准（仅同步时序电路）。
4. **输入（Input）**
5. **输出（Output）**

## 三、状态转换与状态图（时序电路的描述方法）

![[psets/p2-SSLC-Analysis/attachments/state-table.png]]

- **状态转换表（State Transition Table）**：列出当前状态、输入、下一状态和输出。
    
- **状态图（State Diagram）**：用图形方式表示状态及其转移过程。
    
- 状态最小化（State Minimization）是简化电路设计的关键步骤，常考查等价状态合并。

---

- 次态真值表
- 次态卡诺图

### 为什么输出用 Q 表示？

- 在FFs中，**Q** 通常代表主输出（主状态），源自“**Q-output**”的传统命名。
- 这是历史惯例，在所有触发器中（包括 D、T、JK、SR），主输出通常标为 **Q**，反向输出为 **Q'** 或 **¬Q**。

## 四、常考类型与设计思路

### 1. 状态机（Finite State Machine, FSM）建模

FSM分为两类：

- **Moore 型状态机（Moore Machine）**：输出只与当前状态有关。
- **Mealy 型状态机（Mealy Machine）**：输出与当前状态和当前输入有关。

| 模型类型  | 输出依赖      | 优点         | 缺点              |
| ----- | --------- | ---------- | --------------- |
| Moore | 仅当前状态     | 结构清晰，输出稳定  | 响应速度较慢（需等下一个状态） |
| Mealy | 当前状态 + 输入 | 响应快，电路复杂度低 | 设计逻辑复杂，输出易受毛刺影响 |

设计流程：

1. 理解题意，确定状态数；
    
2. 构建状态转换图或表；
    
3. 选择合适的编码方式（如二进制编码、格雷码等）；
    
4. 使用触发器进行状态存储；
    
5. 用组合逻辑生成下一状态逻辑与输出逻辑。

## 五、经典例题解析

### 1. 给定状态图设计对应的时序逻辑电路（如三段式状态机）

**考点**：状态机设计流程、状态编码、触发器选择、逻辑表达式化简。

**简要解析**：

- 步骤一：识别状态数及状态间转移条件；
    
- 步骤二：进行状态编码（如两位二进制）；
    
- 步骤三：推导状态转移函数与输出函数；
    
- 步骤四：使用卡诺图化简逻辑表达式；
    
- 步骤五：绘制电路图。
    

**意义**：本题完整覆盖状态机设计流程，是408常考综合题型之一。

### 2. 序列检测器：设计一个检测输入串中“101”模式的电路。

步骤概览：

1. **状态图设计**：定义各检测阶段状态（如 S0=起始，S1=检测到1，S2=检测到10）。
    
2. **状态编码**：如 2 位编码：S0=00，S1=01，S2=10。
    
3. **状态转移表**：列出在每个状态下不同输入对应的次态和输出。
    
4. **求解方程**：
    
    - 状态转移（Next-State）方程
        
    - 输出方程（Mealy 或 Moore）
        
5. **Verilog 实现**（选做）

## 六、重点易混概念对比

|概念|含义|
|---|---|
|时序逻辑电路|输出依赖于当前输入 + 过去状态（存储）|
|组合逻辑电路|输出仅与当前输入有关|
|Moore 与 Mealy 状态机|输出是否依赖输入是关键差别|
|同步与异步时序电路|是否使用统一时钟控制状态转移|
|状态机 vs 控制单元|状态机是控制单元设计的核心思想，在计算机组成原理中大量使用|

## 七、与相关学科联系

- **计算机组成原理（Computer Organization and Design）**：控制单元设计大量使用状态机，理解状态机有助于理解微程序控制器与硬布线控制器。
	- 控制单元、流水线控制、指令译码、微程序控制器等广泛应用 FSM。
	- PC（Program Counter）更新也是一种同步状态更新。
    
- **操作系统（Operating System）**：硬件中断响应过程可以建模为状态转换序列。
    
- **数字电路基础（Digital Logic）**：掌握时序电路设计是学习更复杂电路（如寄存器文件、流水线寄存器等）的基础。
	- 时序电路是数字系统从“组合逻辑”到“系统设计”的桥梁。
	-  寄存器、计数器、移位器等均可视为时序电路特例。
    
- **数据结构（Data Structure）**：有限状态自动机（Finite Automaton）与状态机模型紧密相关。

## 八、总结与应试建议

时序电路具备**状态记忆能力**，是实现自动控制与信息处理系统的基础。熟练掌握其建模方法（状态图/状态表）、方程推导技巧以及与触发器、时钟等概念的结合，是深入理解现代数字系统的关键。

- 把握**状态机设计流程**，特别是编码与逻辑表达式求解；
    
- 熟练识别**Moore / Mealy 类型**题目的特点；
    
- 注意**状态最小化与状态等价合并**方法，避免冗余设计；
    
- 熟练掌握**D/JK触发器特性**，可应对多种设计题；
    
- 注重与控制器设计的联系，理解其在组成原理中的地位。



