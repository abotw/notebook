
# 简答

## 1. 系统调用 vs. 用户程序 vs. 库函数

> 什么是系统调用？系统调用与一般用户程序和库函数有何区别？
> 
> —— ch01-24-txdsol-p05

### 备考

**系统调用**是OS提供的**内核级接口**，用于程序请求系统资源或服务，执行在**内核态**。

区别如下：

1. 系统调用：**内核态执行**，通过**中断机制**进入内核；
    
2. 用户程序：**用户态执行**，直接为用户完成功能；
    
3. 库函数：封装常用操作，**调用系统调用或用户代码**，便于开发。

### 参考

![](assets/Pasted%20image%2020250529114908.png)

---

系统调用是OS提供给程序员的唯一接口。

程序员利用系统调用，在**源程序层面**动态请求和释放系统资源，调用系统中已有的功能，来完成与**机器硬件相关**的操作，如控制程序的执行速度等。因此，系统调用就像一个“黑箱子”，**对用户屏蔽了OS的具体实现**，仅提供所需的功能。

系统调用与一般用户程序、库函数的主要区别如下：

1. **系统调用在内核态执行**，调用它们时需要通过一种类似**硬件中断**的机制进入内核，才能获得系统服务。
    
2. **普通用户程序**是直接为用户完成某些特定功能而设计的，一般在**用户态执行**。
    
3. **库函数**是为了方便编程而将常用功能封装到函数库中，主要**面向应用开发**，不涉及内核的切换。

## 2. 前驱图

>什么是前驱图？请画出下列4条语句的前驱图。
>
>—— ch02-01-txdsol-p09

### 备考

**前驱图（Precedence Graph）** 是一个 **有向无环图（DAG，Directed Acyclic Graph）**，用于描述进程间执行的前后关系。

### 参考

![](assets/Pasted%20image%2020250531092941.png)

## 3. 进程创建的主要步骤

> （考研真题）**在创建一个进程时，OS 需要完成的主要工作是什么？**
> 
> —— ch02-08-txdsol-p10

### 备考

当OS发现有创建新进程的请求时，主要完成以下工作：

1. **调用进程创建原语**；
    
2. **申请空白PCB**，并填写该进程的控制与管理信息；
    
3. **为进程分配运行所需资源**；
    
4. **将PCB置为就绪状态**，并插入**就绪队列**。

### 参考

![](assets/Pasted%20image%2020250529114821.png)

## 4. 调度选择准则

> 在选择调度方式和调度算法时，应遵循哪些准则？
> 
> —— ch03-08-txdsol-p15

### 备考

在设计OS时，调度方式与调度算法的选择取决于**系统类型**与**设计目标**。不同类型的系统（如**批处理系统**、**分时系统**、**实时系统**）适用不同的调度策略。

应遵循的准则包括：

1. **共同目标**：资源利用率高、公平性与平衡性、策略强制执行；
    
2. **批处理系统**：平均周转时间短、系统吞吐量大、处理机利用率高；
    
3. **分时系统**：响应时间快、负载均衡；
    
4. **实时系统**：保证截止时间、可预测性。

### 参考

![](assets/Pasted%20image%2020250529114428.png)

## 5. 信号量

> 若信号量的初值为 2，当前值为 -1，则表示有多少个等待进程？请分析。
> 
> —— ch04-13-txdsol-p25

**结论**：若当前信号量值为 -1，则表示有 1 个进程在等待资源。

分析：

信号量的初值表示系统中资源的数目，每次执行 P 操作（`P()`）即代表一个进程请求一个单位的资源，信号量会减 1。当信号量的值小于 0 时，表示资源已被分配完，后续的请求进程将被阻塞，加入等待队列。

因此，**当信号量小于 0 时，其绝对值表示当前等待队列中进程的个数**。题目中信号量当前值为 -1，说明有 **1 个等待进程**。

![](assets/Pasted%20image%2020250529114010.png)

---

### 知识点总结：信号量与进程同步

- **信号量（Semaphore）**：用于进程同步和互斥的计数器变量。
    
- **初值**：表示系统中可用资源的总数。
    
- **P 操作（也称 wait 或 down）**：
    
    - 对信号量减 1。
        
    - 若减后结果 < 0，说明无可用资源，当前进程阻塞，进入等待队列。
        
- **V 操作（也称 signal 或 up）**：
    
    - 对信号量加 1。
        
    - 若结果 ≤ 0，唤醒等待队列中的一个进程。
        
- **信号量当前值的含义**：
    
    - ≥ 0：表示仍有空闲资源。
        
    - < 0：其绝对值表示等待进程的数量。


## 6. 分页与分段在信息共享与保护方面的比较

> 为什么说分段系统较分页系统更易实现信息共享与保护？
> 
> _ch05-10-txdsol-p32_

**结论**：分段系统由于其逻辑清晰、管理粒度较大、地址连续，**更易于实现信息的共享与保护**。

分析：

1. **分页系统** 中，每个页是分散存储的，内存是按固定大小划分的页来管理的。若要实现信息共享与保护，需要确保各进程共享的页能够一一对应，这通常需要建立**大量的页表项**来管理映射关系，增加系统负担。
    
2. **分段系统** 中，每个段具有逻辑意义，如代码段、数据段等，每段地址从 **0 开始**，采用连续的地址空间。在实现共享与保护时，只需为共享的程序或数据分配一个段，并在各进程的段表中设置该段的表项即可。这样可以**直接通过段表项实现共享与保护**，更为简便。

![](assets/Pasted%20image%2020250529113712.png)
    
---

### 知识点总结：分页与分段在信息共享与保护方面的比较

|比较维度|分页系统|分段系统|
|---|---|---|
|地址结构|线性划分为固定大小的页|逻辑划分为有意义的段|
|地址连续性|页在内存中不一定连续|每段是连续的地址空间|
|信息共享实现|需要多个页表项进行映射|仅需一个共享段的段表项|
|信息保护实现|通过页表权限控制，但粒度较细，不易管理|段有明确边界，易于设置访问权限|
|管理复杂性|高，需要维护大量页表|较低，段的逻辑意义有助管理|

## 7. 请求分段存储管理的硬件支持

> 为了实现请求分段存储管理，应在系统中增加配置哪些硬件机构？
> 
> _ch06-12-txdsol-p39_

**结论**：请求分段需要 **段表、缺段中断机制和地址转换机构** 三项基本硬件支持，才能高效地实现段式按需调入与访问控制。

为了实现请求分段存储管理，系统需要配置多种硬件机制，以支持高效执行请求式分段。主要包括以下三个方面：

1. **段表机制**：用于记录每个段的起始地址（基址）和长度（段限），支持段的地址转换和访问控制。
    
2. **缺段中断机构**：当程序访问的段尚未装入内存时，触发缺段中断，由操作系统负责调入所需段。
    
3. **地址转换机构**：负责将用户提供的逻辑地址（段号 + 段内偏移）转换为物理地址。
    
![](assets/Pasted%20image%2020250529113509.png)

### 总结

请求分段（**Demand Segmentation**）是一种将进程的各个段按需调入内存的管理方式，为实现该功能，需要如下硬件支持：

|硬件机构|作用说明|
|---|---|
|**段表机制**|存储每个段的基址和段长；进行地址转换和权限检查|
|**缺段中断机构**|段不在内存时自动触发中断，交由操作系统处理装入|
|**地址转换机构**|实现从逻辑地址（段号+段内地址）到物理地址的快速转换|

## 8. 设备中断处理程序及中断处理流程

> 设备中断处理程序通常须完成哪些工作？它对中断进行处理的过程包含哪些步骤？
> 
> _ch07-05-txdsol-p44_

- 设备中断处理程序要完成的工作
	1. **唤醒被阻塞的驱动进程**：当设备完成操作后，唤醒等待该设备的进程。
	2. **保存被中断进程的 CPU 现场信息**：保护当前运行进程的状态，以便后续恢复。
	3. **转入相应的设备处理程序**：根据中断类型调用对应的处理例程。
	4. **处理中断**：执行具体的中断服务，如读取数据、清除中断标志等。
	5. **恢复被中断进程的 CPU 现场**：中断处理完成后，恢复原进程的运行状态。

- 中断处理过程的基本步骤
	1. **测定是否有未响应的中断信号**：由中断控制器检测并确定中断源。
	2. **保护被中断进程的 CPU 现场**：保存当前程序计数器、寄存器等信息。
	3. **转入相应的设备处理程序**：跳转到具体的中断服务程序。
	4. **处理中断**：执行设备相关操作。
	5. **恢复 CPU 现场并退出中断**：恢复原进程状态，继续执行被中断的程序。

![](assets/Pasted%20image%2020250531191451.png)

---

![](assets/Pasted%20image%2020250529113052.png)

### 总结

|项目|说明|
|---|---|
|**中断处理程序职责**|唤醒进程、保存现场、调用处理程序、处理中断、恢复现场|
|**处理步骤**|检测中断 → 保存现场 → 调用处理程序 → 处理中断 → 恢复现场并返回|

**结论**：设备中断处理程序的主要作用是**在不影响当前进程执行的前提下，响应并处理设备的请求**，通过“保存-处理-恢复”的机制完成中断的全过程。

## 文件的逻辑结构与组织形式

> 什么是文件的逻辑结构？逻辑文件有哪几种组织形式？
> 
> _ch08-04-txdsol-p50_

- **文件的逻辑结构（文件组织）**：用户视角下的的文件组织形式，即**用户可以直接处理的数据及其结构**，它独立于文件的物理特性，不关注OS底层如何存储。
	1. **无结构**文件（**流式**文件）：由**字符流/字节流**构成的文件。
		- 文件信息仅是一串字符或字节的集合，无固定的结构，适合连读读写，如 `.txt` 文件。
	2. **有结构**文件（**记录式**文件）：由**若干记录**构成的文件。
		- 文件被划分为若干**逻辑上独立的信息单位**，每个单位称为一个**记录**，具有独立意义，适合数据库或表格类数据的存储与处理。

**总结**：文件的逻辑结构从**用户**角度反映文件内容的组织形式，分为**无结构的流式文件**和**有结构的记录式文件**两类。

---

![](assets/Pasted%20image%2020250529112836.png)












