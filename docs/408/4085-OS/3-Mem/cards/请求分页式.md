# 请求分页式

“请求分页式”是虚拟存储器系统中的一种**按需加载页面（On-Demand Paging）**的存储管理方式，全称是“**请求分页式存储管理（Demand Paging Memory Management）**”。下面是对这个术语的详细解释：

---

### 一、基本概念

**请求分页式**是一种虚拟存储器管理机制，其中：

> **程序的页面（Page）不会在程序一开始执行时就全部加载到内存中，而是“用到再加载”。**

即：只有当 CPU **第一次访问某个尚未在内存中的页面**时，操作系统才会将该页从磁盘（如硬盘、SSD）中加载到内存中。这种机制可以极大地节省内存资源。

---

### 二、关键机制：页面置换与缺页中断

1. **页表（Page Table）**：记录虚拟页与物理页之间的映射关系。
    
2. **缺页异常（Page Fault）**：
    
    - 当程序访问一个尚未加载到内存的页面时，硬件（MMU）会触发一个**缺页中断**。
        
    - 操作系统响应这个中断，从磁盘将缺失页面加载到内存。
        
3. **页面置换算法（Page Replacement Algorithm）**：
    
    - 如果内存已满，操作系统必须选择一个“牺牲页”移出（写回磁盘），为新页面腾出空间。
        
    - 常见算法：FIFO、LRU、OPT 等。
        

---

### 三、请求分页的优势

- **节省内存**：只加载正在使用的页面。
    
- **支持更大程序**：程序大小可以超过物理内存大小。
    
- **更快启动**：程序无需加载全部内容即能开始执行。
    

---

### 四、与“预调页”相对

请求分页式的对立面是**预调页式（Pre-paging）**，即操作系统预判程序接下来会用哪些页，提前加载，提高性能，但可能导致资源浪费。

---

### 五、一个简单例子

假设一个程序被分页为 10 页，物理内存只能装 4 页。

- 程序刚开始运行时，只有入口页被加载。
    
- 当访问第 5 页时，如果它不在内存，产生缺页异常 → 加载第 5 页。
    
- 内存满了？用页面置换算法踢掉一个不常用页。
    

---

### 总结

|名称|内容说明|
|---|---|
|请求分页式|页面按需加载，用到再加载，避免一开始加载全部程序。|
|核心机制|缺页异常 + 页表管理 + 页面置换。|
|优点|节省内存，支持大程序，启动快。|
