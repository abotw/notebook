# objdump

## 📌 简介

`objdump` 是 GNU Binutils 提供的分析二进制文件的命令行工具，常用于**反汇编**、查看段信息、调试等。

## 🔧 常用选项汇总

|选项|说明|
|---|---|
|`-d`|反汇编 `.text` 段（代码段）|
|`-D`|反汇编所有段|
|`-S`|反汇编时显示源码（需调试符号）|
|`-s`|显示所有段的十六进制内容|
|`-h`|显示各段头信息（段名、地址等）|
|`-x`|显示所有头信息（包括符号表等）|
|`-t`|显示符号表|
|`-r`|显示重定位信息|
|`--section=.data`|仅显示指定段|
|`--architecture`|指定架构（交叉编译环境中常用）|

**基本语法：**

```bash
objdump -d a.out         # 反汇编代码段
objdump -S main.o        # 搭配源码查看反汇编
objdump -x libfoo.a      # 查看静态库的段、符号表等
```

## 🎯 经典实用案例

### 1. **查看反汇编以调试优化**

```bash
gcc -g -O2 -c main.c
objdump -dS main.o
```

> 查看编译器是否做了如循环展开、内联等优化，结合 `-O0/-O2/-O3` 使用观察差异。

### 2. **调试链接错误或重定位问题**

```bash
objdump -r foo.o
```

> 检查未解析的外部符号或重定位段问题，常用于分析手动链接失败的场景。

### 3. **分析恶意程序或二进制逆向**

```bash
objdump -D malware.bin
```

> 在无法获取源码时进行静态分析，配合 `strings`、`readelf` 等工具使用。

## 🔗 融会贯通

- **与 `readelf` 区别：**
    
    - `readelf` 更偏向 ELF 格式结构查看（节、程序头、符号等）。
        
    - `objdump` 更偏向**反汇编、代码内容、重定位分析**。
        
- **与 `gdb` 配合：**
    
    - `objdump -dS` 可提供静态视角；
        
    - `gdb` 提供运行时调试，两者结合可还原函数行为。
        
- **在编译体系中位置：**
    
    - 属于后端工具链分析部分，适用于编译结果验证和性能调优。
        

## 🧠 小贴士

- 交叉编译环境中用 `--target` 指定目标平台：
    

```bash
arm-none-eabi-objdump -d foo.elf
```

- 想同时看到反汇编+源码，需添加调试信息（`-g`）编译。
    