# Moore vs Mealy 状态机

---

## 一、基本定义

### 1. Moore 状态机（Moore Machine）

- 输出**仅由当前状态**决定。
    
- 形式表达式：`Output = f(State)`
    
- 状态输出通常在**时钟边沿之后**更新。
    

### 2. Mealy 状态机（Mealy Machine）

- 输出**由当前状态与输入**共同决定。
    
- 形式表达式：`Output = f(State, Input)`
    
- 输出可在**输入变化后立即变化**，响应更快。
    

---

## 二、关键差异对比

| 项目    | Moore 状态机        | Mealy 状态机         |
| ----- | ---------------- | ----------------- |
| 输出依赖  | 仅状态              | 状态 + 输入           |
| 响应速度  | 较慢（一个时钟周期）       | 较快（可在周期内响应）       |
| 状态数   | 多（可能需为每种输出设独立状态） | 少（输出变化不必换状态）      |
| 电路复杂度 | 较简单，易于调试         | 较复杂，输出易产生毛刺       |
| 稳定性   | 高（输出在状态稳定后变化）    | 低（输入变化即输出变化）      |
| 应用场景  | 控制逻辑、同步系统        | 计数器、协议响应等要求快速反应系统 |

---

## 三、术语备注

- **FSM**：Finite State Machine，有限状态机。
    
- **State**：状态，FSM 的核心变量，代表系统运行的不同阶段。
    
- **Output**：输出，FSM 对外表现的行为结果。
    

---

## 四、经典案例与例题

### 例题：识别序列 `1011` 的状态机设计

> 要求在输入位流中识别到连续 `1011` 时输出 1，否则输出 0。

- **Moore 实现**：
    
    - 输出仅在最后状态 S4 输出 1。
        
    - 状态图较多，每个阶段单独建状态。
        
- **Mealy 实现**：
    
    - 可在状态转换中输出，状态数更少。
        
    - 响应快，但需要处理输入变化带来的毛刺。
        

---

## 五、图示结构对比（简化）

### Moore 状态机结构图：

```
[State Register] → [Output Logic]
                  ↘
              [Next State Logic] ← [Input]
```

### Mealy 状态机结构图：

```
[State Register] → [Next State Logic] ← [Input]
       ↓
[Output Logic] ← [Input]
```

---

## 六、关联知识拓展

### 1. 与 Verilog 描述的联系

- **Moore**：输出写在 `always @(posedge clk)` 中，条件仅与 `state` 有关。
    
- **Mealy**：输出逻辑可写在组合逻辑块 `always @(*)` 中，同时依赖 `state` 和 `input`。
    

### 2. 与同步/异步时序电路关系

- 两者皆属于**同步时序电路（Synchronous Sequential Circuit）**的一种实现方式。
    
- 由统一时钟驱动状态转移。
    

### 3. 与控制器设计

- 在**处理器控制单元（Control Unit）**中，Moore 型更常用，因为控制信号更稳定。
    
- Mealy 型适合协议处理（如 SPI、UART 控制逻辑）等快速反应场景。
    

---

## 七、小结

Moore 状态机稳定性高、结构清晰，适合控制逻辑；Mealy 状态机状态更少、响应快，适合实时信号处理。理解两者区别可帮助选择合适的建模方式并优化数字系统设计。
