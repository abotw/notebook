# 时序波形图

---

## 一、基本定义

**时序波形图**（Timing Diagram）是一种描述数字电路中信号随时间变化的图示工具，常用于分析和验证时序逻辑电路（Sequential Logic Circuit）中的**时钟信号、输入输出信号、状态变化**等行为。

---

## 二、波形图的基本构成要素

|元素|说明|
|---|---|
|**Clock**（时钟）|基准信号，驱动同步电路状态变化，标出上升沿/下降沿|
|**Input**（输入）|外部信号，例如控制位、数据线|
|**Output**（输出）|电路响应信号，取决于输入和状态|
|**State**（状态）|有限状态机（FSM）的当前状态|
|**边沿标注**（Edge Annotation）|表示触发条件，如“posedge clk”|
|**延迟**（Delay）|输入变化与输出变化之间的时间间隔|
|**保持/建立时间**（Hold Time / Setup Time）|触发器工作必须满足的关键时间条件|

---

## 三、典型用途

- 验证**同步逻辑电路**的时序行为；
    
- 描述**有限状态机（FSM）**的状态转换；
    
- 展示**组合逻辑延迟**；
    
- 分析**寄存器读写操作**；
    
- 比较输入输出响应时间差异；
    
- 支持调试仿真工具（如 ModelSim、Vivado Sim 等）结果分析。
    

---

## 四、常见时序关系（例图说明）

### 1. D 触发器的时序波形（D Flip-Flop）

```text
clk:   ┌─┐   ┌─┐   ┌─┐   ┌─┐
      ─┘ └───┘ └───┘ └───┘ └──
D:     ────────┐──────────────
               │
Q:     ────────┘──────────────（posedge clk 后输出变为 D 的值）
```

- 输出 Q 在时钟**上升沿（Positive Edge）**时采样 D 的值。
    

### 2. 状态机波形分析（以 Mealy FSM 为例）

```text
clk:  ┌─┐   ┌─┐   ┌─┐
     ─┘ └───┘ └───┘ └───
input:  ─────┐──────────
            │
state: S0 → S1 → S2 → S3
output:     ───────┐────
                  │（依赖 input 和 state）
```

---

## 五、术语备注

- **FSM**：Finite State Machine，有限状态机
    
- **Setup Time**：建立时间，数据需提前稳定的最小时间
    
- **Hold Time**：保持时间，数据需维持稳定的最短时间
    
- **CLK**：Clock，时钟信号
    
- **posedge / negedge**：Positive edge / Negative edge，时钟上升沿 / 下降沿
    

---

## 六、经典例题

### 例题：判断时序电路输出是否正确

> 给定一组波形图，其中输入 `D`、时钟 `clk` 和输出 `Q` 如图所示，判断输出是否正确。

- **思路**：
    
    - 检查 Q 是否在 clk 上升沿后，准确反映 D 的值。
        
    - 检查是否违反建立时间与保持时间。
        
    - 可进一步判断输出延迟是否合规。
        

---

## 七、关联领域知识

### 1. 与 Verilog/SystemVerilog 仿真关系

- Verilog 中使用 `initial` + `$dumpvars`/`$display` 结合仿真工具生成波形图。
    
- **时序图是仿真调试的核心工具**，便于观察模块响应。
    

### 2. 与 FPGA 调试关系

- 在 FPGA 中，可用 **ILA（Integrated Logic Analyzer）** 工具抓取真实运行时序。
    
- 波形图可用于分析模块内部信号，追踪设计缺陷。
    

### 3. 与 CPU 设计关联

- 描述总线读写、流水线控制、握手机制时不可或缺。
    
- 在**MIPS**、**ARM**等微结构设计中广泛使用。
    

---

## 八、小结

时序波形图是数字电路中不可或缺的工具，能直观展现信号间的逻辑与时序关系。掌握其绘制与分析方法，是理解同步系统行为、调试复杂设计的重要能力。
