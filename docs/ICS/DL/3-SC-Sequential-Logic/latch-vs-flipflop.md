# 锁存器 vs 触发器

---

## 一、基本定义

### 锁存器（Latch）

- **锁存器**是一种**电平敏感（Level-Triggered）**的存储元件。
    
- 根据**使能信号（Enable）**电平状态决定是否采样并保持输入值。
    
- 常见类型：
    
    - SR 锁存器（Set-Reset Latch）
        
    - D 锁存器（D Latch, Data Latch）
        

### 触发器（Flip-Flop）

- **触发器**是一种**边沿触发（Edge-Triggered）**的存储元件。
    
- 仅在**时钟信号（CLK, Clock）**的**上升沿或下降沿**采样输入值。
    
- 常见类型：
    
    - D 触发器（D Flip-Flop）
        
    - T 触发器（T Flip-Flop）
        
    - JK 触发器（JK Flip-Flop）
        

---

## 二、核心区别

|特性|锁存器（Latch）|触发器（Flip-Flop）|
|---|---|---|
|触发方式|电平触发（Level-Triggered）|边沿触发（Edge-Triggered）|
|工作时机|只要使能为有效电平就持续响应输入|仅在时钟边沿瞬间采样输入|
|电路复杂度|相对简单|相对复杂|
|功耗|较高（使能期间响应所有输入变化）|较低（仅在边沿采样）|
|常用场景|异步电路、低功耗保持|同步电路、状态存储器、寄存器|

---

## 三、典型电路结构

### D 锁存器（D Latch）

- 输出 `Q` 在 **使能为高电平时**追踪 `D`；
    
- 使能为低电平时保持最后一次输入状态。
    

### D 触发器（D Flip-Flop）

- 输出 `Q` 在 **时钟上升沿**采样 `D` 的值；
    
- 在两个时钟边沿间，`Q` 保持不变。
    

---

## 四、时序图对比

|元件类型|时序图特点|
|---|---|
|D Latch|输出随着输入变化而变化，只要 `Enable` 有效|
|D Flip-Flop|输出只在 `CLK` 边沿改变，即使输入不断变化也不响应|

---

## 五、经典例题：实现一个1位寄存器

### 需求：

- 存储一个1位输入 `D`；
    
- 在时钟上升沿更新；
    
- 初始值为 0。
    

### 解法：

使用 **D 触发器** 即可满足上述需求。

**Verilog 示例代码：**

```verilog
module d_flip_flop (
    input clk,
    input d,
    output reg q
);
    always @(posedge clk)
        q <= d;
endmodule
```

---

## 六、相关知识关联

- **时序电路（Sequential Circuit）**：触发器是其核心构建单元。
    
- **状态机（FSM, Finite State Machine）**：状态存储依赖触发器（尤其是 D 型触发器）。
    
- **寄存器（Register）/计数器（Counter）**：由一组触发器构成。
    
- **Verilog/VHDL建模**：
    
    - 锁存器常因 **条件不完整** 导致误建模。
        
    - 推荐使用 **同步时序块** 建模触发器，避免产生锁存器。
        

---

## 七、小结

- 锁存器适用于对输入响应快、控制简单的电平敏感场景；
    
- 触发器是构建**时钟同步系统**的基础；
    
- 在实际设计中，**优先使用触发器**，除非对功耗/响应时间有特别要求。
    