# Excitation, Output, and Next-State Equation（数字电路）

---

## 一、基本定义

在时序逻辑电路（**Sequential Logic Circuit**）设计中，**Excitation equation**、**Output equation** 和 **Next-state equation** 是描述电路行为和实现逻辑功能的三大核心方程。它们帮助从电路结构层面推导行为，或从功能层面反推出硬件实现。

---

## 二、术语解释

|名称|英文解释|作用|
|---|---|---|
|**激励方程**|**Excitation Equation**|确定触发器输入逻辑（如 D, J, K, T）以实现所需状态变化|
|**输出方程**|**Output Equation**|表达输出信号如何依赖当前状态（及可能的输入）|
|**次态方程 / 状态转移方程**|**Next-State Equation**|描述当前状态和输入下，电路如何转移到下一个状态|

---

## 三、不同触发器的激励方程示例

激励方程随触发器类型不同而异，常用触发器如下：

### 1. D 触发器（D Flip-Flop）

- **激励方程**：`D = Q⁺`（Q⁺ 表示下一状态）
    
- 极简，常用于 FSM 实现
    

### 2. T 触发器（T Flip-Flop）

- `T = Q ⊕ Q⁺`（异或当前与下一状态）
    

### 3. JK 触发器（JK Flip-Flop）

|当前状态 Q|下一状态 Q⁺|J|K|
|---|---|---|---|
|0|0|0|X|
|0|1|1|X|
|1|0|X|1|
|1|1|X|0|

- 激励方程依此表格推导
    

---

## 四、方程之间的关系

1. **Next-State Equation** → 可由状态转移图或表推导。
    
2. **Excitation Equation** → 根据状态转移和触发器类型反推。
    
3. **Output Equation** → 依据 FSM 类型（Moore / Mealy）设计：
    
    - Moore 型：`Output = f(State)`
        
    - Mealy 型：`Output = f(State, Input)`
        

---

## 五、经典例题

### 例题：设计一个序列检测器，识别输入流中“101”模式。

#### 步骤：

1. **状态图绘制**  
    定义状态：S0 (起始)、S1 (1)、S2 (10)、S3 (检测到 101)
    
2. **状态转移表**  
    列出当前状态、输入、次态与输出
    
3. **状态编码**  
    假设用 2 位编码：S0=00，S1=01，S2=10，S3=11
    
4. **Next-State 方程推导**  
    根据状态转移表，使用卡诺图化简生成 `Q1⁺` 和 `Q0⁺`
    
5. **激励方程（以 D 触发器为例）**
    
    - `D1 = Q1⁺`
        
    - `D0 = Q0⁺`
        
6. **输出方程（Mealy 型）**
    
    - 输出 `Z = 1` 当且仅当当前状态为 S2 且输入为 1
        

---

## 六、关联知识拓展

### 1. 与 **状态编码**的联系

状态编码方式（如二进制、格雷码、独热码）影响方程简化程度，需权衡硬件资源与复杂度。

### 2. 与 **Verilog 实现**结合

- `always @(posedge clk)` 中对应 `next-state equation`
    
- `assign` 或组合逻辑模块表达 `output equation`
    
- D 触发器默认映射为寄存器行为
    

### 3. 与 **组合逻辑设计**衔接

Excitation 方程本质上是组合逻辑表达式，为构造同步电路服务。

---

## 七、小结

理解并熟练推导 Excitation、Output 和 Next-State 方程是设计时序电路（特别是有限状态机 FSM）的核心步骤。其重要性类似于组合逻辑中的布尔代数，是数字系统正确运行的数学基础。
