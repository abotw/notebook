# 原始状态图

## 概念定义

原始状态图（Primitive State Diagram）是用于描述**时序逻辑电路行为**的一种图形工具，主要应用于**时序逻辑电路（如有限状态机 FSM）**的设计与分析。  
每一个节点表示**状态**，每一条有向边表示**状态转移**，并标注**输入条件**与**输出结果**（如适用）。

> 状态图通常用于设计 Moore 型或 Mealy 型状态机。

---

## 状态图基本构成要素

- **状态（State）**：电路在某一时刻所处的内部存储状态，通常用圆圈表示，如 S0、S1。
    
- **转移边（Transition Arc）**：带方向的连线，表示从一个状态转移到另一个状态。
    
- **条件（Input Condition）**：标在转移边上的触发条件，表示输入信号满足某种组合时状态转移发生。
    
- **输出（Output）**：
    
    - **Moore 型**：输出仅与当前状态有关。
        
    - **Mealy 型**：输出与当前状态和当前输入有关。
        

---

## 示例：奇偶检测器（Moore 型）

目标：设计一个状态机，检测二进制串中的1的个数是否为偶数。

### 状态定义：

- S0：当前检测到的1的个数为偶数（初始状态）
    
- S1：当前检测到的1的个数为奇数
    

### 状态转移图：

```
      0        1
    ┌───┐    ┌───┐
    │ S0│ ──▶│ S1│
    └─┬─┘    └─┬─┘
      │ 0       │ 1
      └─────────┘
```

### 状态转移描述：

|当前状态|输入|下一个状态|输出|
|---|---|---|---|
|S0|0|S0|0|
|S0|1|S1|0|
|S1|0|S1|0|
|S1|1|S0|0|

> 输出设为0，若要在 S0 输出1 以表示“偶数个1”状态，则改为 Moore 输出逻辑。

---

## 设计流程

1. **明确功能要求**
    
2. **定义状态及状态编码**
    
3. **绘制原始状态图**
    
4. **提取状态转移表**
    
5. **编码状态（可选：状态最小化）**
    
6. **使用状态机模型（Moore 或 Mealy）实现逻辑表达式**
    
7. **用 Verilog/VHDL 实现**
    

---

## 相关领域联系

- **编译原理**：有限状态自动机（DFA/NFA）与状态图本质一致。
    
- **操作系统**：进程状态转换图与原始状态图类似。
    
- **人工智能**：马尔可夫决策过程（MDP）也是一种状态转移模型。
    

---

## 补充：Mealy 与 Moore 区别对比

|特性|Moore 型|Mealy 型|
|---|---|---|
|输出依赖|仅当前状态|当前状态 + 当前输入|
|输出变化时机|状态变化之后|输入变化时即可变化|
|状态数|通常较多|通常较少|
|实现逻辑|更简单，稳定性好|更快反应，但可能更复杂|

---

## 常见错误提醒

- 状态命名应清晰、具备实际意义（避免 S1、S2 无意义堆叠）
    
- 状态转移条件必须**互斥且完备**
    
- 如果存在多个输入，注意逻辑组合数目与状态增长问题
    
